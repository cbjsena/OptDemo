{% extends "core/base.html" %}
{% load static %}

{% block title %}Transportation Assignment - Introduction{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'core/css/instruction.css' %}">
    <link rel="stylesheet" href="{% static 'core/css/model.definition.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid introduction-content">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h2>운송 할당 문제 (Transportation Assignment)</h2>
    </div>

    <p>
        <strong>운송 할당 문제</strong>는 작업 배정 문제의 개념을 물류 및 운송 분야에 특화하여 적용한 문제입니다.
        이 문제는 여러 명의 배송 기사(또는 차량)를 여러 개의 배송 구역(또는 경로)에 1:1로 할당하여,
        전체 운송 비용, 시간, 또는 거리를 최소화하는 최적의 할당 방안을 찾는 것을 목표로 합니다.
    <figure>
        <img src="{% static 'matching_assignment_app/images/transport_assignment_concept.png' %}" alt="운송 할당 문제 개념도" class="intro-image" style="max-width: 600px;">
        <figcaption class="image-caption">그림 1: 운송 할당 문제 개념 - 각 기사-구역 쌍의 예상 소요 시간을 바탕으로, 총 운송 시간이 최소화되는 1:1 할당을 찾습니다.</figcaption>
    </figure>

    <div class="link-to-more-info">
        이 문제의 기반이 되는 일반적인 할당 문제에 대한 설명은 여기를 참고하세요:
        <a href="{% url 'matching_assignment_app:assignment_introduction' %}">
            작업 배정 문제 (Assignment Problem) 소개 페이지 &rarr;
        </a>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <h3>1. 문제 설명 및 응용</h3>
            <p>
                이 문제는 "누가 어느 지역을 담당해야 가장 효율적인가?"라는 질문에 대한 답을 찾는 과정입니다. 각 기사는 특정 지역에 대한 숙련도, 거주지와의 거리, 해당 지역의 교통 패턴에 대한 이해도 등이 다르기 때문에, 기사별로 특정 구역을 담당하는 데 드는 비용이나 시간이 달라집니다.
            </p>
            <p>주요 응용 분야는 다음과 같습니다:</p>
            <ul>
                <li><strong>라스트마일 배송:</strong> 택배, 음식 배달 등에서 각 배송 기사에게 가장 효율적인 배송 구역을 할당합니다.</li>
                <li><strong>서비스 지역 할당:</strong> 방문 수리, 설치 기사 등에게 서비스 지역을 나누어 할당하여 이동 시간을 최소화하고 일일 처리량을 극대화합니다.</li>
                <li><strong>장거리 화물 운송:</strong> 여러 대의 트럭과 운전기사를 각각 다른 장거리 운행 노선에 배정하여 유류비와 운행 시간을 최적화합니다.</li>
            </ul>

            <h3>2. VRP와의 관계</h3>
            <p>
                운송 할당 문제는 차량 경로 문제(VRP)와 밀접한 관련이 있지만, 문제의 초점이 다릅니다.
            </p>
            <ul>
                <li><strong>VRP (차량 경로 문제):</strong> 하나의 배송 구역 내에서 여러 고객을 어떤 순서로 방문해야 하는지에 대한 '경로' 자체를 최적화하는 데 중점을 둡니다.</li>
                <li><strong>운송 할당 문제:</strong> 여러 배송 구역(작업)을 여러 기사(작업자)에게 어떻게 1:1로 나눌 것인지에 대한 '할당'을 최적화하는 데 중점을 둡니다.</li>
            </ul>
            <p>
                실제 물류 환경에서는 2단계 접근법을 사용하기도 합니다: <strong>(1단계)</strong> 먼저 운송 할당 문제 모델로 각 기사에게 최적의 구역을 할당하고, <strong>(2단계)</strong> 각 기사는 할당된 구역 내에서 VRP 모델을 사용하여 최적의 배송 경로를 찾습니다.
            </p>

            <h3>3. 수학적 모델</h3>
            <div class="model-definition-content">
                <h4 class="model-definition-content"><strong>입력 데이터:</strong></h4>
                <ul>
                    <li><strong>\( i \in \{1, 2, \dots, n\} \)</strong> : 드라이버의 인덱스. \( n \) 은 총 드라이버의 수</li>
                    <li><strong>\( j \in \{1, 2, \dots, m\} \)</strong> : 구역의 인덱스. \( m \) 은 총 구역의 수</li>
                    <li><strong>\( c_{ij} \)</strong> : 드라이버 \( i \) 가 구역 \( j \) 를 담당할 때 발생하는 비용 또는 시간</li>
                </ul>
                <hr>

                <h4 class="model-definition-content"><strong>결정 변수:</strong></h4>
                <ul>
                    <li> <strong>\( x_{ij} \)</strong> : 드라이버 \( i \) 가 구역 \( j \) 에 할당되면 1, 아니면 0(이진 변수)</li>
                </ul>
                <hr>

                <h4 class="model-definition-content"><strong>목적 함수:</strong> 총 운송 시간 최소화</h4>
                <div class="math-block">
                    <p>$$\min \sum_{i=1}^{n} \sum_{j=1}^{m} c_{ij} \cdot x_{ij}$$</p>
                </div>

                <h4 class="model-definition-content"><strong>제약 조건:</strong></h4>
                <ul>
                    <li><strong>기사 제약:</strong> 각 기사는 정확히 하나의 구역에 배정
                        <div class="math-block">
                            $$\sum_{j=1}^{m} x_{ij} = 1 \quad \forall i$$
                        </div>
                    </li>
                    <li><strong>구역 제약:</strong> 각 구역은 정확히 한 명의 기사에게 배정
                        <div class="math-block">
                            $$\sum_{i=1}^{n} x_{ij} = 1 \quad \forall j$$
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card shadow-sm sticky-top" style="top: 20px;">
                <div class="card-header bg-success text-white">
                    <h4>Transport Assignment Demo</h4>
                </div>
                <div class="card-body">
                <p><strong>Transport Assignment Demo</strong>에서는 아래와 같은 기능을 직접 체험해볼 수 있습니다.</p>
                <ul>
                    <li>기사와 배송 구역의 수 설정</li>
                    <li>기사별 배송 구역의 비용 정보 입력</li>
                    <li>최적의 배송 기사별 배송 구역 할당 계획 확인</li>
                </ul>
                <a href="{% url 'matching_assignment_app:transport_assignment_demo' %}" class="btn btn-success mt-2">
                    데모 페이지로 이동 &rarr;
                </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}