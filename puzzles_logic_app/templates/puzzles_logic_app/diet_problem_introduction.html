{% extends "core/base.html" %}
{% load static %}
{% load production_filters %}

{% block title %}The Diet Problem - Introduction{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'core/css/instruction.css' %}">
    <link rel="stylesheet" href="{% static 'core/css/model.definition.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid introduction-content">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h2>다이어트 문제 (The Diet Problem)</h2>
    </div>

    <p>
        <strong>다이어트 문제</strong>는 운영 연구(Operations Research) 및 선형 계획법(Linear Programming) 분야에서
        가장 오래되고 고전적인 문제 중 하나입니다.
        이 문제는 주어진 음식들의 집합에서, 특정 영양소의 최소/최대 섭취량과 같은 일련의 제약 조건을 만족시키면서
        총 구매 비용을 최소화하는 음식의 조합과 양을 찾는 것을 목표로 합니다.
    </p>

    <figure>
        <img src="{% static 'puzzles_logic_app/images/diet_problem_concept.png' %}"
             alt="다이어트 문제 개념도" class="intro-image" style="max-width: 600px;">
        <figcaption class="image-caption">그림 1: 다이어트 문제 개념 - 다양한 음식들의 가격과 영양 정보를 바탕으로, 영양 요구사항을 만족하는 최소 비용의 식단을 구성합니다.</figcaption>
    </figure>

    <div class="row">
        <div class="col-lg-8">
            <h3>1. 문제 설명 및 핵심 제약</h3>
            <p>
                이 문제는 "어떻게 하면 가장 저렴한 비용으로 필요한 영양을 모두 섭취할 수 있을까?"라는 직관적인 질문을 수학적으로 모델링합니다.
            </p>
            <ul>
                <li>각 음식은 고유의 가격과 영양 성분(칼로리, 단백질, 지방, 비타민 등)을 가집니다.</li>
                <li>전체 식단은 반드시 정해진 각 영양소의 최소 섭취량 이상, 최대 섭취량 이하를 포함해야 합니다.</li>
                <li>목표는 이러한 제약 조건을 모두 만족하는 음식 조합의 총비용을 최소화하는 것입니다.</li>
            </ul>

            <h3>2. 산업 응용 분야</h3>
            <p>다이어트 문제는 개인의 식단 구성뿐만 아니라, 다양한 산업에서 비용 효율적인 '혼합(Blending)' 문제를 해결하는 데 널리 사용됩니다.</p>
            <ul>
                <li><strong>농업 및 축산업:</strong> 가축의 건강과 성장에 필요한 모든 영양소를 충족시키면서, 여러 곡물과 원료를 혼합하여 최소 비용의 사료를 생산합니다.</li>
                <li><strong>식품 제조업:</strong> 소시지, 주스, 시리얼 등 가공식품을 만들 때, 법적 기준과 품질 기준을 만족시키면서 원재료 혼합 비용을 최소화합니다.</li>
                <li><strong>석유 및 화학 산업:</strong> 다양한 등급의 원유나 화학 물질을 혼합하여, 특정 품질 기준(예: 옥탄가)을 만족하는 최종 제품을 최소 비용으로 생산합니다.</li>
                <li><strong>급식 및 케이터링 서비스:</strong> 학교, 병원, 군대 등 대규모 단체 급식에서 영양 균형과 예산을 동시에 고려한 최적의 주간 식단을 계획합니다.</li>
            </ul>

            <h3>3. 수학적 모델</h3>
            <div class="model-definition-content">
                <h4 class="model-definition-content"><strong>입력 데이터:</strong></h4>
                <ul>
                    <li><strong>\( i \in \{1, 2, \dots, n\} \)</strong> : 영양소의 인덱스. n은 총 영양소의 수</li>
                    <li><strong>\( j \in \{1, 2, \dots, m\} \)</strong> : 음식의 인덱스. m은 총 음식의 수</li>
                    <li> <strong>\( a_{ij} \)</strong> : 음식 \( j \)의 영양소 \( i \)의 단위당 함량</li>
                    <li><strong>\( N_{min,i} \)</strong> : 영양소 \( i \) 에 대한 최소 섭취량</li>
                    <li><strong>\( N_{max,i} \)</strong> : 영양소 \( i \) 에 대한 최대 섭취량</li>
                </ul>
                <hr>

                <h4 class="model-definition-content"><strong>결정 변수:</strong></h4>
                <ul>
                    <li> <strong>\( x_{j} \)</strong> : 선택할 음식 \( j \)의 양</li>
                </ul>
                <hr>

                <h4 class="model-definition-content"><strong>목적 함수:</strong> 총비용 최소화</h4>
                    <div class="math-block">
                        <p>$$ \min \sum_{j} c_{j} x_{j}$$</p>
                    </div>

                <h4 class="model-definition-content"><strong>제약 조건:</strong></h4>
                <ul>
                    <li>각 영양소 $i$에 대한 최소 섭취량 제약
                        <div class="math-block">
                            $$ \sum_{j=1}^{m} a_{ij} x_{j} \ge N_{min, i}  \quad \forall i $$
                        </div>
                    </li>
                    <li>각 영양소 $i$에 대한 최대 섭취량 제약
                        <div class="math-block">
                            $$ \sum_{j=1}^{m} a_{ij} x_{j} \le N_{max, i} \quad \forall i $$
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card shadow-sm sticky-top" style="top: 20px;">
                <div class="card-header bg-success text-white">
                    <h4>Diet Problem Demo</h4>
                </div>
                <div class="card-body">
                    <p><strong>Diet Problem Demo</strong>에서는 아래와 같은 기능을 직접 체험해볼 수 있습니다.</p>
                    <ul>
                        <li>식품 수와 영양소 수를 설정</li>
                        <li>영양소와 식품 정보 입력</li>
                        <li>영양소를 만족하며 비용이 최소화 되는 식단 확인</li>
                    </ul>
                    <a href="{% url 'puzzles_logic_app:diet_problem_demo' %}" class="btn btn-success mt-2">
                        데모 페이지로 이동 &rarr;
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
{% endblock %}